<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="data/style.css">
    <title>FLASHCARDS</title>
</head>


<body>
    <div class="container">
       <div class="row">
        <div class="col-1 avg left"><a id="returnbtn" href="index.html"><</a></div>
        <div class="col-10 big center">ADD NEW</div>
       </div>

        <div class="row">
        <form id="form">
            <div class="form-row ">



            <div class="form-group col-md-4 mb-0 first-col">
                <label for="name">NAME</label>
                <input type="text" class="form-control customborder" id="name" placeholder="">
                <button id="submitbtn" type="submit" class="btn btn-primary customborder ">Save</button>
            
            </div>

            </div>
            <div id="bottomline">
             
                <div id = "descHolder" class="form-group col-md-6 col-sm-12">
                    <label for="description">Description:</label>
                    <textarea type="text" class="form-control customborder tall" id="description" placeholder="" ></textarea>
                </div>

                <div class="form-group col-md-6 col-sm-12">
                    <label for="collection">Collectionâ†“</label>
                    <select class="form-control customborder tall" id="collection" size="10">
                        <option>+</option>                        
                    </select>
                </div>
            </div>

        </form>
        </div>

    </div>

    <button id="modeicon">
        <img id = "sun" src="data/img/sun.png" alt="light/dark mode icon">
        <img id = "moon" src="data/img/moon.png" alt="light/dark mode icon">
    </button>



<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('form');
    const nameInput = document.getElementById('name');
    const descriptionInput = document.getElementById('description');
    const collectionSelect = document.getElementById('collection');
    const submitBtn = document.getElementById('submitbtn');

    loadCollections();

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      let name = nameInput.value.trim();
      let description = descriptionInput.value.trim();
      let selectedCollection = collectionSelect.value;

      if (name === "" || description === "" || selectedCollection === "") {
        alert("Please fill in all the options!");
        return;
      }

      if (selectedCollection === '+') {
        const newCollection = prompt("Please enter a new collection's name:", "Collection name");

        if (!newCollection || newCollection.trim() === "") {
          alert("Invalid collection name, try again.");
          return;
        }

        selectedCollection = newCollection.trim();
        addCollectionOption(selectedCollection);
      }

      let allData = JSON.parse(localStorage.getItem('flashcardsData')) || {};

      if (!allData[selectedCollection]) {
        allData[selectedCollection] = [];
      }

      allData[selectedCollection].push({ name, description });

      localStorage.setItem('flashcardsData', JSON.stringify(allData));

      alert("Flashcard saved!");

      form.reset();
    });

    function loadCollections() {
      const data = JSON.parse(localStorage.getItem('flashcardsData')) || {};
      collectionSelect.innerHTML = '<option>+</option>'; 

      for (const collectionName in data) {
        addCollectionOption(collectionName);
      }
    }

    function addCollectionOption(name) {
      const option = document.createElement('option');
      option.textContent = name;
      option.value = name;
      collectionSelect.appendChild(option);
    }
  });
</script>




    
</body>






</html>

